<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <NodeDirectory>$(ProjectDir)..\packages\Ncapsulate.Node.0.10.28\nodejs\</NodeDirectory>
    <NpmJsFile>$(NodeDirectory)node_modules\npm\bin\npm-cli.js</NpmJsFile>
    <NewNpmJsFile>$(TargetDir)edge\node_modules\npm\bin\npm-cli.js</NewNpmJsFile>
  </PropertyGroup>
  <Target Name="NativeModuleSupportTest" AfterTargets="AfterBuild">
    <MakeDir Directories="$(TargetDir)edge" />
    <Exec Command="&quot;$(NodeDirectory)node.exe&quot; &quot;$(NpmJsFile)&quot; install node-gyp"
          WorkingDirectory="$(TargetDir)edge"
          Condition="!Exists('$(TargetDir)edge\node_modules\node-gyp')"/>
    <Exec Command="&quot;$(NodeDirectory)node.exe&quot; &quot;$(NpmJsFile)&quot; install npm"
          WorkingDirectory="$(TargetDir)edge"
          Condition="!Exists('$(TargetDir)edge\node_modules\npm')"/>
    <Exec Command="&quot;$(NodeDirectory)node.exe&quot; &quot;$(NewNpmJsFile)&quot; install zombie"
          WorkingDirectory="$(TargetDir)edge"
          Condition="!Exists('$(TargetDir)edge\node_modules\zombie')"/>
  </Target>
</Project>
